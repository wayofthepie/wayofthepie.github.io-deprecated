<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
	<title> - linux</title>
	<subtitle>Software Pie</subtitle>
	<link href="https://wayofthepie.github.io/tags/linux/atom.xml" rel="self" type="application/atom+xml"/>
  <link href="https://wayofthepie.github.io"/>
	<generator uri="https://www.getzola.org/">Zola</generator>
	<updated>2020-06-14T00:00:00+00:00</updated>
	<id>https://wayofthepie.github.io/tags/linux/atom.xml</id>
	<entry xml:lang="en">
		<title>Morning silence and broken drivers</title>
		<published>2020-06-14T00:00:00+00:00</published>
		<updated>2020-06-14T00:00:00+00:00</updated>
		<link href="https://wayofthepie.github.io/linux-broken-driver/morning-silence/" type="text/html"/>
		<id>https://wayofthepie.github.io/linux-broken-driver/morning-silence/</id>
		<content type="html">&lt;p&gt;I woke up this morning and booted my desktop. No sound! Some digging around and I noticed &lt;code&gt;dmesg&lt;&#x2F;code&gt; spitting out an error. I don&#x27;t have that message saved but here are the details from the kernel logs.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;span&gt;&lt;i class=&quot;icon fas fa-info-circle&quot;&gt;&lt;&#x2F;i&gt;&lt;&#x2F;span&gt;
&lt;span class=&quot;alert-text&quot;&gt;
  &lt;p&gt;
  Originally posted on &lt;a href=&quot;https:&#x2F;&#x2F;dev.to&quot;&gt;dev.to&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;dev.to&#x2F;wayofthepie&#x2F;morning-silence-and-broken-drivers-2d3b&quot;&gt;here&lt;&#x2F;a&gt;.
  &lt;&#x2F;p&gt;
&lt;&#x2F;span&gt;
&lt;&#x2F;div&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;✦&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; ➜ journalctl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --system --since&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; yesterday | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Focusrite Scarlett&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -C10
...
Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:45:59 sky kernel: usb 1-1.2.3: USB disconnect, device number 8
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: new high-speed USB device number 9 using ehci-pci
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: New USB device found, idVendor=1235, idProduct=8203, bcdDevice= 6.2f
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: New USB device strings: Mfr=1, Product=3, SerialNumber=2
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: Product: Scarlett 6i6 USB
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: Manufacturer: Focusrite
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: SerialNumber: 00009810
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Jun&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 14 06:46:00 sky kernel: usb 1-1.2.3: Focusrite Scarlett Gen 2 Mixer Driver disabled; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;use&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; options snd_usb_audio device_setup=1 to enable and report any issues to g@b4.v
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It looks like a driver update in the latest kernel broke my USB audio device, a pretty old Focusrite Scarlett. A quick google of the error brings you to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;geoffreybennett&#x2F;scarlett-gen2&#x2F;releases&quot;&gt;these release notes&lt;&#x2F;a&gt;. This is a fork of the kernel where the Focusrite Scarlett driver development happens. They mention adding one of the following lines to &lt;code&gt;&#x2F;etc&#x2F;modprobe.d&#x2F;scarlett.conf&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;options snd_usb_audio device_setup=1,1,1,1
options snd_usb_audio vid=0x1235 pid=0x8212 device_setup=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Great! I&#x27;m not sure what &lt;code&gt;vid&lt;&#x2F;code&gt; and &lt;code&gt;pid&lt;&#x2F;code&gt; are. However, if you look back up at the kernel logs there is a line that looks like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;New USB device found, idVendor=1235, idProduct=8203, bcdDevice= 6.2f
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;vid&lt;&#x2F;code&gt; is probably the Vendor ID and &lt;code&gt;pid&lt;&#x2F;code&gt; product ID. I had a quick look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;geoffreybennett&#x2F;scarlett-gen2&#x2F;commit&#x2F;63693795498192ca1142aca4a829a1276a1c76b9&quot;&gt;commit for that release&lt;&#x2F;a&gt; and that clarified it. There are a number of constants defined in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;geoffreybennett&#x2F;scarlett-gen2&#x2F;blob&#x2F;63693795498192ca1142aca4a829a1276a1c76b9&#x2F;sound&#x2F;usb&#x2F;mixer_quirks.c&quot;&gt;sound&#x2F;usb&#x2F;mixer_quirks.c&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;case &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USB_ID&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x1235&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x8203&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* Focusrite Scarlett 6i6 2nd Gen *&#x2F;
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;case &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USB_ID&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x1235&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x8204&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* Focusrite Scarlett 18i8 2nd Gen *&#x2F;
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;case &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USB_ID&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x1235&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x8201&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* Focusrite Scarlett 18i20 2nd Gen *&#x2F;
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;case &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USB_ID&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x1235&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x8212&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* Focusrite Scarlett 4i4 3rd Gen *&#x2F;
    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;case &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;USB_ID&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x1235&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d08770;&quot;&gt;0x8213&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;): &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;&#x2F;* Focusrite Scarlett 8i6 3rd Gen *&#x2F;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The kernel logs have &lt;code&gt;idProduct=8203&lt;&#x2F;code&gt;, this matches the constant with the comment for the &lt;code&gt;Focusrite Scarlett 6i6 2nd Gen&lt;&#x2F;code&gt;, which is the device I have. Great, so now we know what &lt;code&gt;vid&lt;&#x2F;code&gt; and &lt;code&gt;pid&lt;&#x2F;code&gt; should be. Add this to &lt;code&gt;&#x2F;etc&#x2F;modprobe.d&#x2F;scarlett.conf&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;options snd_usb_audio vid=0x1235 pid=0x8203 device_setup=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Run &lt;code&gt;sudo systemctl restart systemd-modules-load.service&lt;&#x2F;code&gt; to reload the kernel modules. Check they are loaded:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;✦&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; ➜ modprobe&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -c &lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;| &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; snd_usb_audio | &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;grep&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; options
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;options&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; snd_usb_audio vid=0x1235 pid=0x8203 device_setup=1
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Still no sound... &lt;&#x2F;p&gt;
&lt;h1 id=&quot;still-silence&quot;&gt;Still silence&lt;&#x2F;h1&gt;
&lt;p&gt;Now what?  Some more googling around brought me to &lt;a href=&quot;https:&#x2F;&#x2F;linuxmusicians.com&#x2F;viewtopic.php?f=6&amp;amp;t=19975&amp;amp;start=30&quot;&gt;this forum thread&lt;&#x2F;a&gt;. There is some discussion about the issue there, luckily the author of the driver is also posting! In one of the comments they mention:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Please upgrade to 5.4.1 first; there are known issues with the 6i6 support in 5.4.0 and it won&#x27;t work very well even after you enable it.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;What version of the kernel am I on?&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; uname&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -r
5.4.0-37-generic
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ah! A likely suspect. Let&#x27;s compile a custom kernel, say the latest 5.4.x kernel. It&#x27;s been a while since I&#x27;ve done this. &lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; wget https:&#x2F;&#x2F;cdn.kernel.org&#x2F;pub&#x2F;linux&#x2F;kernel&#x2F;v5.x&#x2F;linux-5.4.46.tar.xz

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; wget https:&#x2F;&#x2F;cdn.kernel.org&#x2F;pub&#x2F;linux&#x2F;kernel&#x2F;v5.x&#x2F;linux-5.4.46.tar.sign

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; unxz linux-5.4.46.tar.xz

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# I haven&amp;#39;t stored the public keys for linus&#x2F;greg on this machine yet
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --locate-keys&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; torvalds@kernel.org gregkh@kernel.org
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; WARNING: unacceptable HTTP redirect from server was cleaned up
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; key 38DBBDC86092693E: public key &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Greg Kroah-Hartman &amp;lt;gregkh@kernel.org&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; imported
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Total number processed: 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;               imported: 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; WARNING: unacceptable HTTP redirect from server was cleaned up
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; key 79BE3E4300411886: public key &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Linus Torvalds &amp;lt;torvalds@kernel.org&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; imported
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Total number processed: 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;               imported: 1
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pub&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;   rsa4096 2011-09-23 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;SC&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;647F28654894E3BD457199BE38DBBDC86092693E
uid           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; unknown&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Greg Kroah-Hartman &amp;lt;gregkh@kernel.org&amp;gt;
sub   rsa4096 2011-09-23 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;E&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;pub&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;   rsa2048 2011-09-20 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;SC&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;ABAF11C65A2970B130ABE3C479BE3E4300411886
uid           &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; unknown&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Linus Torvalds &amp;lt;torvalds@kernel.org&amp;gt;
sub   rsa2048 2011-09-20 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;E&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Verify the signature, can ignore the warning I just haven&amp;#39;t trusted
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --verify&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; linux-5.4.46.tar.sign
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; assuming signed data in &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;linux-5.4.46.tar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Signature made Wed 10 Jun 2020 19:25:28 IST
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;                using RSA key 647F28654894E3BD457199BE38DBBDC86092693E
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Good signature from &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Greg Kroah-Hartman &amp;lt;gregkh@kernel.org&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;unknown&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; WARNING: This key is not certified with a trusted signature!
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;          There is no indication that the signature belongs to the owner.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;Primary&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; key fingerprint: 647F 2865 4894 E3BD 4571  99BE 38DB BDC8 6092 693E

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# I haven&amp;#39;t trusted the key so I got a warning, to do so
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --tofu-policy&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; good 647F28654894E3BD457199BE38DBBDC86092693E
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Setting TOFU trust policy for new binding &amp;lt;key: 647F28654894E3BD457199BE38DBBDC86092693E, user id: Greg Kroah-Hartman &amp;lt;gregkh@kernel.org&amp;gt;&amp;gt; to good.

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; gpg&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --trust-model&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tofu&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --verify&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; linux-5.4.46.tar.sign
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; assuming signed data in &amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;linux-5.4.46.tar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;#39;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Signature made Wed 10 Jun 2020 19:25:28 IST
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;                using RSA key 647F28654894E3BD457199BE38DBBDC86092693E
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; Good signature from &amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#a3be8c;&quot;&gt;Greg Kroah-Hartman &amp;lt;gregkh@kernel.org&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;full&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;gpg:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; gregkh@kernel.org: Verified 1 signatures in the past 0 seconds.  Encrypted
     &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; messages.

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; tar xf linux-5.4.46.tar
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; cd linux-5.4.46&#x2F;

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Copy the current kernels config
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ cp &#x2F;boot&#x2F;config-$(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;uname -r&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;) .config

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Once menuconfig loads just save and exit, no need to change anything
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ make menuconfig

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# This can take a while...
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;➜ time make&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -j12
  HOSTCC&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  scripts&#x2F;basic&#x2F;fixdep
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;DESCEND&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  objtool
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;...

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Install the modules
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; sudo make modules_install
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;...

&lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# Install the kernel
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; sudo make install
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;make install&lt;&#x2F;code&gt; should setup the boot config needed in grub, I just need to reboot now. Reboot... and nothing!&lt;&#x2F;p&gt;
&lt;h1 id=&quot;silence-and-broken-graphics&quot;&gt;Silence and broken graphics&lt;&#x2F;h1&gt;
&lt;p&gt;This time &lt;code&gt;dmesg&lt;&#x2F;code&gt; is giving a different error. &lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  159.097340] usb 1-1.1: Product: Scarlett 6i6 USB
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  159.097343] usb 1-1.1: Manufacturer: Focusrite
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  159.097344] usb 1-1.1: SerialNumber: 00009810
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#96b5b4;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;  164.318711] usb 1-1.1: Scarlett Gen 2 USB response result cmd 0 was -110
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;On top of that, I broke the nvidia drivers :smile: these need to be compiled for the kernel you are on. This is my lovely 1440p display:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;wayofthepie.github.io&#x2F;linux-broken-driver&#x2F;morning-silence&#x2F;nvidia-broken.png&quot; alt=&quot;Alt Text&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Purge them and flip back to noveau for now:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;&quot;&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; sudo apt-get remove&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; --purge&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; nvidia-*
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; reboot
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;➜&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; lshw&lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt; -c&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; video
  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;*-display
       description:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; VGA compatible controller
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;product:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; GP102 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;GeForce GTX 1080 Ti&lt;&#x2F;span&gt;&lt;span style=&quot;color:#b48ead;&quot;&gt;]
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;vendor:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; NVIDIA Corporation
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;physical&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; id: 0
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;bus&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; info: pci@0000:03:00.0
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;version:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; a1
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;width:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 64 bits
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;clock:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; 33MHz
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;capabilities:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; vga_controller bus_master cap_list rom
       &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;configuration:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt; driver=nouveau latency=0 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#65737e;&quot;&gt;# running noveau drivers now
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#c0c5ce;&quot;&gt;       resources: irq:73 memory:fa000000-faffffff memory:c0000000-cfffffff memory:d0000000-d1ffffff ioport:e000(size=128) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#bf616a;&quot;&gt;memory:c0000-dffff
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Much better:
&lt;img src=&quot;https:&#x2F;&#x2F;wayofthepie.github.io&#x2F;linux-broken-driver&#x2F;morning-silence&#x2F;nvidia-fixed.png&quot; alt=&quot;Alt Text&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Back to the &lt;code&gt;dmesg&lt;&#x2F;code&gt; error - &lt;code&gt;Scarlett Gen 2 USB response result cmd 0 was -110&lt;&#x2F;code&gt;. Looking at &lt;code&gt;alsamixer&lt;&#x2F;code&gt; this shows it is not recognizing the device properly.
&lt;img src=&quot;https:&#x2F;&#x2F;wayofthepie.github.io&#x2F;linux-broken-driver&#x2F;morning-silence&#x2F;usb-sound-ports.png&quot; alt=&quot;Alt Text&quot; &#x2F;&gt; &lt;&#x2F;p&gt;
&lt;p&gt;I wonder if it is the USB port I&#x27;m using... It is! Using a different port:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;wayofthepie.github.io&#x2F;linux-broken-driver&#x2F;morning-silence&#x2F;usb-sound-ports-different-port.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I get the expected &amp;quot;Front left&amp;quot;, &amp;quot;Front center&amp;quot; sound output when running &lt;code&gt;speaker-test -t wav -c 6&lt;&#x2F;code&gt;. This is weird, as other devices work fine on that port and it was previously working there too. Something else to investigate another time I guess.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h1&gt;
&lt;p&gt;In the end there were a number of issues. This is the first time a driver issue has caused me trouble on linux in years. But my hardware is getting old, it&#x27;s probably time to upgrade a few things. Also:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Don&#x27;t try to debug and fix an issue when you have just woken up and have had no caffeine injected into your system yet.&lt;&#x2F;li&gt;
&lt;li&gt;All computers are broken.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
</feed>
